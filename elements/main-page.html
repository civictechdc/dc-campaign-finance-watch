<link rel="import" href="../bower_components/polymer/polymer.html">
<polymer-element name="main-page">

  <template>

    <core-scaffold theme="core-light-theme">
        <core-header-panel navigation flex mode="seamed" theme="core-light-theme">
            <core-toolbar theme="core-dark-theme"></core-toolbar>
              <core-menu selected="{{selected}}" valueattr="id" theme="core-light-theme">
                <core-ajax auto url="../json/years and offices.json" response="{{items}}" handleAs="json"></core-ajax>
                <template repeat="{{item in items}}">
                  <core-submenu icon="visibility" label="{{item.year}}">
                    <template repeat="{{office in item.offices}}">
                      <core-item id="{{item.year}} {{office}}" label="{{office}}"></core-item>
                    </template>
                  </core-submenu>
                </template>
              </core-menu>
        </core-header-panel>
        <div tool>DC Campaign Finance Watch</div>
        <core-pages selected="{{selected}}" valueattr="id">
          <div id="2014 Council At-Large"><bar-charts source="json/grassroot-donors.json"></bar-charts></div>
          <div id="grassrootdollars"><bar-charts source="json/grassroot-dollars.json"></bar-charts></div>
          <div id="corporatedonors"><bar-charts source="json/corporate-donors.json"></bar-charts></div>
          <div id="corporatedollars"><bar-charts source="json/corporate-dollars.json"></bar-charts></div>
          <div id="paytoplay">These analyses will link campaign contributions to District contracts.  The cash paid to office holdersâ€™ campaigns will be linked to past, existing, and pending contracts with the city. </div>
          <div id="industryinfluence">Using NIGP codes and all available online data, we will link donors with specific industries. We can then sort each candidate and political office-holder by level of industry influence and relate them to upcoming bills.   </div>
          <div id="officeholders">A moving average of corporate capture & grass roots support for each current officeholder. Will span available data.</div>
          <div id="about">We are just regular folk coding for DC.  Come to a <a href="http://www.meetup.com/Code-for-DC/">meetup</a> or <a href="https://github.com/codefordc/dc-campaign-finance-watch">check out a repo on github</a>!</div>
        </core-pages>
  </template>

  <script>
    Polymer('main-page', {
      ready: function() {
        window.onhashchange = function() {
          var page = window.location.hash.substring(1);
          this.selected = page;
        }.bind(this);
        this.selected = 'grassrootdonors';
      },
      selectedChanged: function() {
        window.location.hash = this.selected;
      }
    });
  </script>

</polymer-element>
